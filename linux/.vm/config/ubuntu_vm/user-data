#cloud-config
hostname: ubuntu_vm
fqdn: ubuntu_vm.local

users:
  - name: ubuntu
    sudo: ALL=(ALL) NOPASSWD:ALL
    plain_text_passwd: ubuntu123
    passwd: ubuntu123
    ssh_authorized_keys:
      - $SSH_KEY
    lock_passwd: false
    shell: /bin/bash
chpasswd: { expire: false }
ssh_pwauth: false

package_update: true
package_upgrade: true

packages:
  - transmission-cli
  - transmission-daemon
  - net-tools
  - iproute2
  - wget
  - curl
  - vim
  - less
  - file
  - openssh-server
  - git

runcmd:
  - |
    set -eux
    sudo -u ubuntu git clone https://github.com/soIipsist/.dotfiles.git /home/ubuntu/.dotfiles
    sudo chown -R ubuntu:ubuntu /home/ubuntu/.dotfiles
    cd /home/ubuntu/.dotfiles
    sudo -u ubuntu bash setup.sh .network .vm_files .ufw
